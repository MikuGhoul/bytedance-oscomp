# proj3-Enhancement of kernel livepatch function conflict dection
### 项目名称
Linux内核热补丁间函数冲突检测增强

### 项目描述与背景
多个内核热补丁可能修改同一个函数，且这些补丁的加载顺序不同也会影响系统中正在运行的这些补丁的整体逻辑，造成潜在风险，目前内核中livepatch的实现是如果两个补丁之间存在冲突，那么对于冲突的函数而言，生效的是后加载的补丁，举个例子 

1. 补丁A的修改函数 a1、b1、c1，补丁B修改函数 a2, d2，且A先于B加载，那么系统中生效的补丁逻辑则为  a1、b1、c1、d2

2. 补丁A的修改函数 a1、b1、c1，补丁B修改函数 a2, d2，且A后于B加载，那么系统中生效的补丁逻辑则为  a2、b1、c1、d2
备注：a1表示 a函数打补丁后的第个版本，同理 aN表示a函数打补丁后的第N个版本，可类推至其他函数
从上面可以不难分析出，a1搭配d2来跑可能会有问题，另外如果A和B加载的顺序不一致，那么对于机器集群来说，最终生效的补丁逻辑也存在不一致的情况。

### 功能描述

#### 基础功能：
1. 补丁ko插入时判断其对内核函数的修改是否与当前running的其他补丁冲突，如果冲突，默认情况下报错退出
2. 支持确实要进行冲突覆盖的场景
3. 导出函数冲突信息到sys接口，方便用户态查询读取
涉及组件：kpatch的用户态部分、内核livepatch框架

#### 扩展功能：


### 所属赛道

2022全国大学生操作系统比赛的“OS内核实现”赛道



### 参赛要求

- 以小组为单位参赛，最多三人一个小组，且小组成员是来自同一所高校的本科生（2022年春季学期或之后本科毕业的大一~大四的学生）
- 如学生参加了多个项目，参赛学生选择一个自己参加的项目参与评奖
- 请遵循“2022全国大学生操作系统比赛”的章程和技术方案要求



### 项目导师





### 难度

中等


### 参考资料
[livepatch](https://www.kernel.org/doc/html/latest/livepatch/livepatch.html)

[kpatch](https://github.com/dynup/kpatch)  



### License

* [GPL-2.0](https://opensource.org/licenses/GPL-2.0)



## 预期目标

完成基础的开发并输出说明文档一篇。

**注意：下面的内容是建议内容，不要求必须全部完成。选择本项目的同学也可与导师联系，提出自己的新想法，如导师认可，可加入预期目标**

参考任务描述部分。